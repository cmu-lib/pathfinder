---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# pathfinder

[![Travis build status](https://travis-ci.org/dSHARP-CMU/pathfinder.svg?branch=master)](https://travis-ci.org/dSHARP-CMU/pathfinder)
[![Coverage status](https://codecov.io/gh/dSHARP-CMU/pathfinder/branch/master/graph/badge.svg)](https://codecov.io/github/dSHARP-CMU/pathfinder?branch=master)
  
The goal of pathfinder is to find a path across multiple edge bundles in a graph that minimizes the number of times each bundle is traversed.

## Installation

You can install the development version:

```{r, eval = FALSE}
devtools::install_github("dSHARP-CMU/pathfinder")
```

## Usage

Starting with an igraph object, specify edge bundles that must be traversed by using a list of edge indices:

```{r, include = FALSE}
library(pathfinder)
```

```{r}
# A small subset of road data from Pittsburgh
pgh_graph

pgh_distances

# Edges belonging to Pittsburgh bridges
pgh_bundles
```

`greedy_search()` will traverse the graph by walking a path from the starting vertex to the nearest edge bundle, crossing that bundle, then finding the next closest bundle, until all bundles have been crossed at least once.
By setting `penalize = TRUE` you can add a severe edge weight penalty to crossed bundles to discourage crossing bundles more than once.

```{r}
penalized_run <- greedy_search(pgh_graph, edge_bundles = pgh_bundles, distances = pgh_distances, penalize = TRUE)
```

It's also possible to supply penalty functions that will completely prohibit recrossing edge bundles, however this may result in incomplete paths that get trapped.

```{r}
infinite_run <- greedy_search(pgh_graph, edge_bundles = pgh_bundles, distances = pgh_distances, penalize = TRUE, penalty_fun = penalize_inf)
```

Tidying methods are also available to get summary statistics on resulting pathways at different levels of resolution. For more info, see `?glance`, `?tidy`, `?augment`
